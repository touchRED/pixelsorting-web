{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.min.js","sourcesContent":["var gui = new dat.GUI();\n\nvar sortedImg;\nvar sorted = false;\nvar original;\nvar pix = [];\n\nfunction Controls(){\n\tthis.imageURL = \"\";\n\tthis.imageName = \"\";\n\tthis.Upload = function(){\n\t\tdocument.querySelector('input[type=file]').click();\n\t}\n\tthis.Create = function(){\n\t\tvar self = this;\n\t\tloadImage(this.imageURL, function(img){\n\n\t\t\t// original = img;\n\t\t\t// image(img, 50, 0, 150, (150 * img.height)/img.width);\n\n\t\t\tsortNoWorker(img);\n\t\t});\n\t}\n\tthis.Save = function(){\n\t\tsortedImg.save(\"sorted\", \"png\");\n\t}\n}\n\nvar ctrl = new Controls();\nvar create = gui.addFolder(\"Create\");\n// create.add(ctrl, 'imageName').listen();\ncreate.add(ctrl, 'Upload');\ncreate.add(ctrl, 'Create');\ncreate.add(ctrl, 'Save');\n\nfunction uploadImg(){\n\tvar file = document.querySelector('input[type=file]').files[0];\n\tvar reader = new FileReader();\n\n\treader.onload = function(event) {\n\t\tctrl.imageURL = event.target.result;\n\t\tctrl.imageName = file.name;\n\t\tloadImage(ctrl.imageURL, function(img){\n\t\t\toriginal = img;\n\t\t});\n\t}\n\n\treader.readAsDataURL(file);\n}\n\nfunction sorter(a, b){\n\treturn ((a.levels[3] << 24) + (a.levels[0] << 16) + (a.levels[1] << 8) + a.levels[2]) - ((b.levels[3] << 24) + (b.levels[0] << 16) + (b.levels[1] << 8) + b.levels[2]);\n}\n\nfunction sortNoWorker(img){\n\tsortedImg = createImage(img.width, img.height);\n\tvar tmp = [];\n\n\timg.loadPixels();\n\tfor (var i = 0; i < 4*(img.width*img.height); i+=4){\n\t\ttmp.push(color(img.pixels[i], img.pixels[i+1], img.pixels[i+2], img.pixels[i+3]));\n\t}\n\n\ttmp.sort(sorter);\n\n\tsortedImg.loadPixels();\n\tvar k = 0;\n\tfor (var i = 0; i < 4*(img.width*img.height); i+=4){\n\n\t\tsortedImg.pixels[i] = red(tmp[k]);\n\t\tsortedImg.pixels[i + 1] = green(tmp[k]);\n\t\tsortedImg.pixels[i + 2] = blue(tmp[k]);\n\t\tsortedImg.pixels[i + 3] = alpha(tmp[k]);\n\t\tk++;\n\t}\n\tsortedImg.updatePixels();\n\tsorted = true;\n\n\t// original = sortedImg;\n\n}\n\nfunction preload(){\n\n\toriginal = createImage(5,5);\n\n}\n\nfunction setup(){\n\n\tcreateCanvas(windowWidth, windowHeight);\n\n}\n\nfunction draw(){\n\tclear();\n\tvar padding;\n\n\tif(original.width > original.height){\n\t\tpadding = (windowHeight - (windowWidth/2 * original.height / original.width)) / 2;\n\n\t\timage(original, 0, padding, windowWidth/2, (windowWidth/2 * original.height) / original.width);\n\t}else{\n\t\tpadding = (windowWidth/2 - (windowHeight * original.width) / original.height) / 2;\n\n\t\timage(original, padding, 0, (windowHeight * original.width) / original.height, windowHeight);\n\t}\n\n\tif(sorted){\n\t\tif(sortedImg.width > sortedImg.height){\n\t\t\tpadding = (windowHeight - (windowWidth/2 * sortedImg.height / sortedImg.width)) / 2;\n\n\t\t\timage(sortedImg, windowWidth/2, padding, windowWidth/2, (windowWidth/2 * sortedImg.height)/sortedImg.width);\n\t\t}else{\n\t\t\tpadding = (windowWidth/2 - (windowHeight * sortedImg.width)/sortedImg.height) / 2;\n\n\t\t\timage(sortedImg, padding + windowWidth/2, 0, (windowHeight * sortedImg.width)/sortedImg.height, windowHeight);\n\t\t}\n\t}\n}\n"]}